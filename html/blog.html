<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/iframe.css" />
    <script src='/js/get.js'></script>
    <script type="text/javascript" src="/blog/blog.js"></script>
  </head>
  <body>
     <script>
      const get = getGET(parent.window.location);
    </script>
    <h1 class='top-text'>Blog</h1>
    <p>
      <script>
        document.write(blogDescription);
      </script>
    </p>
    <br />
    <script>
      if ("cat" in get) {
        document.write("<h1>" + get['cat'] + "</h1>")
        document.write("<ul>")
        for (var i = 0; i < blogPosts.length; i++) {
          var entry = blogPosts[i].title.replace(/ /g, "-");
          entry = entry.toLowerCase();
          if (blogPosts[i].categories.includes(get['cat']) == true) {
              document.write("<li><a href='../index.html?nav=blog&entry=" + entry + "' target='_top'>" + blogPosts[i].title + " - " + blogPosts[i].datePublished + "</a></li>");
          }
        }
      } else {
        document.write("<h1>All Entries</h1>");
        document.write("<ul>")
        for (var i = 0; i < blogPosts.length; i++) {
          var entry = blogPosts[i].title.replace(/ /g, "-");
          entry = entry.toLowerCase();
          document.write("<li><a href='../index.html?nav=blog&entry=" + entry + "' target='_top'>" + blogPosts[i].title + " - " + blogPosts[i].datePublished + "</a></li>");
        }
      }
      document.write("</ul>")
    </script>
    <br />
    <p class='hr'><hr /></p>
    <br />
    <p><b>Categories</b>: <a href='../index.html?nav=blog' target="_top">All Entries</a>
    <script>
      var categories = [];
      for (var i = 0; i < blogPosts.length; i++) {
        for (var j = 0; j < blogPosts[i].categories.length; j++) {
          if (categories.includes(blogPosts[i].categories[j]) == false) {
            categories.push(blogPosts[i].categories[j]);
          }
        } 
      }
      categories.sort();
      for (var i = 0; i < categories.length; i++) {
        document.write("<a href='../index.html?nav=blog&cat=" + categories[i] + "' target='_top'>" + categories[i] + "</a> ");
      }
    </script>
  </body>
</html>
