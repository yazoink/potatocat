<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/iframe.css" />
    <script src='../js/get.js'></script>
    <script type="text/javascript" src="../json/blog.json"></script>
  </head>
  <body>
    <script>
      var i;
      for (i = 0; i < blog.length; i++) {
        if (blog[i].entry == get['entry']) {
          break;
        }
      }
      document.write("<p class='top-text'><a href='../index.html?nav=blog' target='_top'>&#11176; Back</a> <a id='copy-url' href='../index.html/nav=blog&entry=" + get['entry'] + "' onclick='copyURL()'>&#x2398; Copy URL</a></p>");

      const delay = ms => new Promise(res => setTimeout(res, ms));

      const copyURL = async () => {
        url = `${window.location.hostname}/index.html?nav=blog&entry=${get['entry']}`;
        navigator.clipboard.writeText(url);
        document.getElementById("copy-url").innerHTML = "&#x2398; Copied!"; 
        await delay(1000);
        document.getElementById("copy-url").innerHTML = "&#x2398; Copy URL"; 
      }

      document.write("<h1>" + blog[i].title + "</h1>");
      document.write("<h2>" + blog[i].subheading + "</h2>");
      document.write("<p><i>" + blog[i].datePublished + "</i></p>");
      document.write("<br />");
      for (var j = 0; j < blog[i].content.length; j++) {
        document.write(blog[i].content[j]);
      }
      document.write("<br />");
      document.write("<p><b>Categories: </b>");
      for (var j = 0; j < blog[i].categories.length; j++) {
        document.write("<a href='../index.html?nav=blog&cat=" + blog[i].categories[j] + "' target='_top'>" + blog[i].categories[j] + "</a> ");
      }
      document.write("</p>");
    </script>
    <br />
  </body>
</html>
